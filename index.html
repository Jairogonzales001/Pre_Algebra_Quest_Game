<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Learn two-step inequalities through an epic adventure! Algebra Quest is an educational math game where you battle monsters by solving inequality problems.">
    <title>Algebra Quest: The Inequality Challenge</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Title Screen -->
    <div class="title-screen" id="titleScreen">
        <div class="game-title">âš”ï¸ ALGEBRA QUEST âš”ï¸</div>
        <div class="game-subtitle">The Inequality Challenge</div>
        <p class="story-text">
            The kingdom is under attack by algebra monsters!<br>
            You are the chosen Math Wizard. Use your knowledge of<br>
            solving two-step inequalities to cast powerful spells and save the realm!
        </p>
        <button class="start-button" onclick="showLesson()">âš”ï¸ START ADVENTURE</button>
    </div>

    <!-- Lesson Screen -->
    <div class="lesson-screen" id="lessonScreen">
        <div class="lesson-container">
            <h1 class="lesson-title">âš”ï¸ WIZARD TRAINING: Mastering Inequalities</h1>
            <p style="text-align: center; color: #4ecdc4; font-size: 1.3em; margin-bottom: 20px;">Before you face the monsters, you must learn the ancient art of solving two-step inequalities!</p>

            <div class="lesson-content">
                <div class="lesson-section">
                    <h2>ğŸ¯ The Goal</h2>
                    <p>Get the variable (x) by itself on one side of the inequality!</p>
                </div>

                <div class="lesson-section">
                    <h3>ğŸ“ Example: 2x + 3 > 7</h3>
                    <div class="step-box">
                        <div class="step">
                            <span class="step-number">Step 1:</span>
                            <span class="step-text">Subtract 3 from both sides</span>
                            <div class="step-math">2x + 3 - 3 > 7 - 3 â†’ 2x > 4</div>
                        </div>
                        <div class="step">
                            <span class="step-number">Step 2:</span>
                            <span class="step-text">Divide both sides by 2</span>
                            <div class="step-math">2x Ã· 2 > 4 Ã· 2 â†’ x > 2</div>
                        </div>
                    </div>
                </div>

                <div class="lesson-section warning-box">
                    <h3>âš ï¸ CRITICAL RULE!</h3>
                    <p class="warning-text">When you <strong>multiply or divide by a NEGATIVE number</strong>, you must <strong>FLIP the inequality sign!</strong></p>
                    <div class="example-box">
                        <div class="example-title">Example: -2x < 6</div>
                        <div class="step-math">Divide both sides by -2</div>
                        <div class="step-math" style="color: #ff6b6b;">-2x Ã· (-2) <strong style="color: #ffd700;">&gt;</strong> 6 Ã· (-2)</div>
                        <div class="step-math">x <strong style="color: #ffd700;">&gt;</strong> -3  <span style="color: #4ecdc4;">(notice the flip from &lt; to &gt;)</span></div>
                    </div>
                </div>

                <div class="lesson-section">
                    <h3>ğŸ“º Watch This Tutorial</h3>
                    <div class="video-container">
                        <iframe
                            src="https://www.youtube.com/embed/H1tQFiCMYT4"
                            title="How to Solve Two-Step Inequalities"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>

                <div class="lesson-section">
                    <h3>ğŸ’¡ How to Enter Answers in the Game</h3>
                    <div class="answer-format">
                        <div class="format-item">âœ… x>5</div>
                        <div class="format-item">âœ… x&lt;=-3</div>
                        <div class="format-item">âœ… x&gt;=10</div>
                        <div class="format-item">âœ… x&lt;2</div>
                    </div>
                    <p style="margin-top: 15px; color: #4ecdc4;">Use: <code>&lt;</code> <code>&gt;</code> <code>&lt;=</code> <code>&gt;=</code></p>
                </div>
            </div>

            <div class="lesson-buttons">
                <button class="continue-btn" onclick="startGame()">ğŸ”¥ LET'S BATTLE!</button>
                <button class="continue-btn" onclick="backToTitle()" style="background: linear-gradient(45deg, #666, #888); margin-top: 15px;">â† BACK TO MENU</button>
            </div>
        </div>
    </div>

    <!-- Dungeon Selection -->
    <div class="dungeon-select" id="dungeonSelect">
        <h1 style="color: #ffd700; font-size: 3em; margin-bottom: 30px;">Choose Your Dungeon</h1>
        <div class="dungeon-card" onclick="selectDungeon('forest')">
            <div class="dungeon-name">ğŸŒ² Whispering Forest</div>
            <div class="dungeon-difficulty">Difficulty: Easy</div>
            <p style="color: #4ecdc4; margin-top: 10px;">Positive coefficients only. Perfect for beginners!</p>
        </div>
        <div class="dungeon-card" onclick="selectDungeon('cave')">
            <div class="dungeon-name">ğŸ”ï¸ Crystal Caves</div>
            <div class="dungeon-difficulty">Difficulty: Medium</div>
            <p style="color: #4ecdc4; margin-top: 10px;">Negative numbers included. Watch your inequality signs!</p>
        </div>
        <div class="dungeon-card" onclick="selectDungeon('tower')">
            <div class="dungeon-name">ğŸ° Shadow Tower</div>
            <div class="dungeon-difficulty">Difficulty: Hard</div>
            <p style="color: #4ecdc4; margin-top: 10px;">Master level inequalities. Don't forget to reverse!</p>
        </div>
    </div>

    <!-- Battle Screen -->
    <div class="battle-screen" id="battleScreen">
        <div class="battle-field">
            <!-- Player -->
            <div class="character">
                <div class="character-sprite">ğŸ§™â€â™‚ï¸</div>
                <div class="health-bar-container">
                    <div class="health-label">You - Lvl <span id="playerLevel">1</span></div>
                    <div class="health-bar">
                        <div class="health-fill player-health" id="playerHealth" style="width: 100%"></div>
                    </div>
                </div>
            </div>

            <!-- Enemy -->
            <div class="enemy">
                <div class="enemy-sprite" id="enemySprite">ğŸ‘¹</div>
                <div class="health-bar-container">
                    <div class="health-label" id="enemyName">Algebra Goblin</div>
                    <div class="health-bar">
                        <div class="health-fill" id="enemyHealth" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Menu Button -->
        <button class="menu-button" onclick="togglePauseMenu()">â˜° MENU</button>

        <!-- Stats Panel -->
        <div class="stats-panel">
            <div class="stat-row">
                <span class="stat-label">XP:</span>
                <span class="stat-value" id="playerXP">0 / 100</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Wins:</span>
                <span class="stat-value" id="playerWins">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Streak:</span>
                <span class="stat-value" id="playerStreak">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Gold:</span>
                <span class="stat-value" id="playerGold">0 ğŸª™</span>
            </div>
        </div>

        <!-- Battle Log -->
        <div class="battle-log" id="battleLog">
        </div>

        <!-- Inventory -->
        <div class="inventory-panel">
            <div style="color: #4ecdc4; margin-bottom: 5px; font-weight: bold;">ğŸ’¼ Inventory (Click to Use):</div>
            <div class="item-slot" id="healthPotionSlot" onclick="useItem('healthPotion')" title="Click to use Health Potion - Restores 50 HP (FREE once purchased!)">
                âš—ï¸<span class="item-count" id="healthPotionCount">2</span>
            </div>
            <div class="item-slot" id="powerGemSlot" onclick="useItem('powerGem')" title="Click to use Power Gem - Next attack deals DOUBLE damage (FREE once purchased!)">
                ğŸ’<span class="item-count" id="powerGemCount">1</span>
            </div>
            <div class="item-slot" id="hintScrollSlot" onclick="useItem('hintScroll')" title="Click to use Hint Scroll - Get a FREE hint for current problem (FREE once purchased!)">
                ğŸ“œ<span class="item-count" id="hintScrollCount">1</span>
            </div>
            <button class="shop-button" onclick="openShop()">ğŸ›’ Shop</button>
        </div>

        <!-- Problem Panel -->
        <div class="problem-panel">
            <div class="spell-cast-header">âœ¨ Cast Your Spell - Show Your Work! âœ¨</div>
            <div class="problem-display" id="problemDisplay"></div>
            <div class="visual-hint" id="visualHint"></div>
            <div class="answer-input-section">
                <input type="text" class="spell-input" id="spellInput" placeholder="Type your answer" onkeypress="if(event.key==='Enter') castSpell()">
                <div class="action-buttons">
                    <button class="battle-btn btn-attack" onclick="castSpell()">âš”ï¸ SUBMIT</button>
                    <button class="battle-btn btn-hint" onclick="useHint()">ğŸ’¡ HINT (10ğŸª™)</button>
                </div>
            </div>
            <div id="hintDisplay"></div>
        </div>

        <!-- Pause Menu -->
        <div class="pause-menu" id="pauseMenu">
            <div class="pause-title">â¸ï¸ PAUSED</div>
            <div class="menu-options">
                <button class="menu-option-btn" onclick="togglePauseMenu()">â–¶ï¸ Resume Battle</button>
                <button class="menu-option-btn" onclick="changeDifficulty()">ğŸ° Change Dungeon</button>
                <button class="menu-option-btn danger" onclick="exitToTitle()">ğŸšª Exit to Title</button>
            </div>
            <p style="margin-top: 30px; color: #888; font-size: 1.1em;">
                Current Dungeon: <span style="color: #ffd700;" id="currentDungeonName">Whispering Forest</span>
            </p>
        </div>

        <!-- Shop Modal -->
        <div class="pause-menu" id="shopModal" style="display: none;">
            <div class="pause-title">ğŸ›’ BATTLE SHOP</div>
            <div style="color: #4ecdc4; font-size: 1.2em; margin-bottom: 10px;">Your Gold: <span style="color: #ffd700;" id="shopGold">50</span> ğŸª™</div>
            <div style="color: #888; font-size: 0.9em; margin-bottom: 15px; font-style: italic;">Buy items - then use them for FREE in battle!</div>
            <div class="menu-options">
                <div class="shop-item">
                    <div style="font-size: 2em;">âš—ï¸</div>
                    <div style="font-weight: bold; color: #4ecdc4;">Health Potion</div>
                    <div style="font-size: 0.9em; color: #888; margin: 5px 0;">Restores 50 HP</div>
                    <button class="menu-option-btn" onclick="buyItem('healthPotion')" style="font-size: 1em; padding: 10px 20px;">
                        Buy for 30 ğŸª™
                    </button>
                </div>
                <div class="shop-item">
                    <div style="font-size: 2em;">ğŸ’</div>
                    <div style="font-weight: bold; color: #4ecdc4;">Power Gem</div>
                    <div style="font-size: 0.9em; color: #888; margin: 5px 0;">Double damage next attack</div>
                    <button class="menu-option-btn" onclick="buyItem('powerGem')" style="font-size: 1em; padding: 10px 20px;">
                        Buy for 50 ğŸª™
                    </button>
                </div>
                <div class="shop-item">
                    <div style="font-size: 2em;">ğŸ“œ</div>
                    <div style="font-weight: bold; color: #4ecdc4;">Hint Scroll</div>
                    <div style="font-size: 0.9em; color: #888; margin: 5px 0;">Free hint for problem</div>
                    <button class="menu-option-btn" onclick="buyItem('hintScroll')" style="font-size: 1em; padding: 10px 20px;">
                        Buy for 20 ğŸª™
                    </button>
                </div>
            </div>
            <button class="menu-option-btn" onclick="closeShop()" style="margin-top: 20px; background: linear-gradient(45deg, #666, #888);">Close</button>
        </div>

        <!-- Victory Screen -->
        <div class="victory-screen" id="victoryScreen">
            <div class="victory-title">â­ VICTORY! â­</div>
            <div class="reward-box">
                <div class="reward-item">ğŸ‰ +<span id="xpReward">50</span> XP</div>
                <div class="reward-item">ğŸª™ +<span id="goldReward">25</span> Gold</div>
                <div class="reward-item" id="levelUpMsg"></div>
            </div>
            <button class="continue-btn" onclick="nextBattle()">CONTINUE QUEST</button>
            <button class="continue-btn" onclick="returnToDungeonSelect()" style="background: linear-gradient(45deg, #666, #888);">CHANGE DUNGEON</button>
        </div>

        <!-- Defeat Screen -->
        <div class="defeat-screen" id="defeatScreen">
            <div class="victory-title" style="color: #ff6b6b;">ğŸ’€ DEFEATED ğŸ’€</div>
            <p class="story-text">Don't give up! Every wizard learns from their mistakes.</p>
            <button class="continue-btn" onclick="retry()">TRY AGAIN</button>
            <button class="continue-btn" onclick="returnToDungeonSelect()" style="background: linear-gradient(45deg, #666, #888);">CHANGE DUNGEON</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
